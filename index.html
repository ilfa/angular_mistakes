<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>reveal.js</title>

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/beige.css">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="lib/css/atom-one-light.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<section>
					<hi>Как переписать крупный проект на Angular и (не) впасть в депрессию</hi>
					<p>
						<small>Илья Таратухин / <a href="http://twitter.com/darkilfa">@darkilfa</a></small>
					</p>
				</section>
				<section>Докладчик</section>
				<section>
					<h3>О чем будем говорить?</h3>
					<ul>
						<li>О проекте и проблемах</li>
						<li>Проблемы ангуляра</li>
						<li>Проблемы проектирования</li>
						<li>Вредные советы от Google</li>
						<li>Что же делать?</li>
					</ul>
				</section>
				<section>
					<section>
						<h1>С чем имеем дело?</h1>
					</section>
					<section>
						<ul>
							<li>10 лет проекту</li>
							<li class="fragment">legacy код на Extjs и велосипедах</li>
							<li class="fragment">50+ разработчиков на одном проекте</li>
							<li class="fragment">Новый код dart + Angular</li>
							<li class="fragment">Разработчики все те же</li>
						</ul>
					</section>
				</section>
				<section>
					<section>
						<h1>Angular, any problems?</h1>
					</section>
					<section>
						<h2>Change detection</h2>
						<ui>
							<li>Default</li>
							<li>OnPush</li>
						</ui>
					</section>
					<section>
						How CD works
					</section>
					<section>
						Example with cd loop

						class HighLevelComponent {
							ngOnChanges() {
								state = new state(params);
							}
						}
					</section>
					<section>
						<h2>Dependency injection</h2>
					</section>
					<section>
						<h2>Dynamic components</h2>
					</section>
					<section>
						<h2>ContentChildren</h2>
						<ul>
							<li class="fragment">Not same as &lt;ng-content&gt;</li>
							<li class="fragment">DI works from component description point</li>
						</ul>
					</section>
					<section>
						<h2>Template</h2>
						<ul>
							<li class="fragment">NgTemplateOutlet</li>
							<li class="fragment">ViewContainerRef.createEmbeddedView</li>
							<li class="fragment">ViewContainerRef.createComponent</li>
						</ul>
					</section>
					<section data-background-image="img/dynamic.png" data-background-position="center" data-background-size="contain">
					</section>
					<section>
						<ul>
							<li class="fragment">Use OnPush</li>
							<li class="fragment">Don't use DI for horizontal connections</li>
							<li class="fragment">Avoid dynamic components</li>
						</ul>
					</section>
				</section>
				<section>
					<section>
						<h1>Newbie Angular developer and what can goes wrong?</h1>
					</section>
					<section>
						<h1>Input</h1>
					</section>
					<section>
						<pre class="stretch"><code class="typescript" data-trim data-noescape>
@Component{
	selector: 'custom-input'
}
class CustomInput {
	@Input() value: String;
	@Input() label: String;
	@Output() change: EventEmitter&lt;any&gt; = new EventEmitter();<mark class="fragment spy dot" data-fragment-index="1">

	@Input() size: String; // s, m, l, xl</mark><mark class="fragment spy dot" data-fragment-index="2">
	@Input() type: String; // default, light, invisible</mark><mark class="fragment spy dot" data-fragment-index="3">
	@Input() fieldType: String; // text, email, number, password</mark><mark class="fragment spy dot">
	@Input() isReadonly: Bool;</mark><mark class="fragment spy dot">
	@Input() isAutocomplete: Bool;</mark><mark class="fragment spy dot">

	@Output() focus: EventEmitter&lt;any&gt; = new EventEmitter();</mark><mark class="fragment spy dot">
	@Output() blur: EventEmitter&lt;any&gt; = new EventEmitter();</mark><mark class="fragment spy dot">

	focus(): void {}</mark><mark class="fragment spy dot">
	...</mark>
}
						</code></pre>
						<span class="fragment fade-in" data-fragment-index="0">
						<img class="mock fragment fade-out" src="img/input.png" data-fragment-index="3"/>
						</span>
						<!--<span class="fragment fade-in"><span class="fragment fade-out">@Input() size: String; // s, m, l, xl</span></span>-->
					</section>
					<section>
						<pre class="stretch"><code class="typescript" data-trim data-noescape>
// custom input template

&lt;input class="input-text"<mark class="fragment dot spy">
	ref-input</mark><mark class="fragment dot spy">

	[type]="type"
	[disabled]="isDisabled"
	[placeholder]="placeholderText"
	[readonly]="isReadonly"
	[autocomplete]="autocomplete"</mark><mark class="fragment dot spy">

	(input)="onChange($event)"
	(focus)="onFocus($event)"
	(blur)="onBlur($event)"</mark>/&gt;

<mark class="fragment dot">&lt;label *ngIf="isLabelNotEmpty"
  <mark>(click)="focus()"</mark>&gt;
	{{ label }}
&lt;/label&gt;</mark>
						</code></pre>
						<span class="fragment"></span>
					</section>
					<section>
						<pre><code class="typescript" data-trim data-noescape>
@Component{
	selector: '[input]custom-input'
}
class CustomInput {<mark class="fragment dot" data-fragment-index="2">
	@Input() size: String; // s, m, l, xl</mark><mark class="fragment dot" data-fragment-index="3">
	@Input() skin: String; // default, light, invisible</mark>
}
						</code><code class="html" data-trim data-noescape><mark class="fragment dot" data-fragment-index="5">
&lt;input-wrapper [label]="labelText"&gt;</mark>
    <mark class="fragment dot" data-fragment-index="1">&lt;input custom-input
	[type]="'password'"<mark class="fragment spy dot" data-fragment-index="4">
	[size]="'m'" [skin]="'light'"</mark>/&gt;</mark><mark class="fragment dot" data-fragment-index="5">
&lt;input-wrapper/&gt;</mark>
						</code></pre>
					</section>
					<section>
						<h1>Tooltip</h1>
					</section>
					<section>
						<pre><code class="html">
&lt;tooltip
	[trigger]="'click'"
	[position]="'right'"
	[target]="buttonRef"&gt;
	Tooltip content
&lt;/tooltip&gt;
						</code></pre>
						<pre><code class="typescript">
class Tooltip {
	@Input() trigger: String;
	@Input() position: String;
	@Input() target: Element;
}
						</code></pre>
					</section>
					<section>
						<pre><code class="typescript" data-trim data-noescape>
class Tooltip {
	@Input() trigger: String;
	@Input() position: String;
	@Input() target: Element;<mark class="fragment spy dot">
	open(): void {}</mark><mark class="fragment spy dot">
	close(): void {}</mark><mark class="fragment spy dot">
	@Output() onOpen: EventEmitter&lt;any&gt; = new EventEmitter();</mark><mark class="fragment spy dot">
	@Output() onClose: EventEmitter&lt;any&gt; = new EventEmitter();</mark>
}
						</code></pre>
					</section>
					<section>
						<pre><code class="typescript" data-trim data-noescape>
class Tooltip {
	@Input() position: String;
}
						</code></pre>
						<pre class="fragment"><code class="html" data-trim data-noescape>
&lt;tooltip<mark class="fragment spy"> *ngIf="isOpened"</mark>&gt;
	Tooltip content
&lt;/tooltip&gt;
						</code></pre>
					</section>
					<section>
						<ul>
							<li class="fragment">Don't wrap native elements</li>
							<li class="fragment">Write stateless components</li>
							<li class="fragment">Write simple components</li>
						</ul>
					</section>
				</section>
				<section>
					<section>
						<h2>Need more advices?</h2>
						<ul class="fragment">
							<li>Use sandbox!</li>
						</ul>
					</section>
					<section data-background-image="img/demo1.png" data-background-size="contain"></section>
					<section data-background-image="img/demo2.png" data-background-size="contain"></section>
					<section>
						<h2>Angular can be useless and annoying</h2>
						<ul>
							<li class="fragment">Too much change detection</li>
							<li class="fragment">Need to trigger change detection manually</li>
							<li class="fragment">You have it on other tech stack?</li>
						</ul>
					</section>
					<section>
						<h2>Use external library!</h2>
					</section>
				</section>
				<section>
					<h2>Result</h2>
					<ul>
						<li class="fragment">OnPush</li>
						<li class="fragment">Unidirectional data flow</li>
						<li class="fragment">Stateless components</li>
						<li class="fragment">Avoid dynamic components</li>
						<li class="fragment">Don't wrap native elements</li>
						<li class="fragment">Use sandbox</li>
						<li class="fragment">It's OK to use other library</li>
					</ul>
				</section>
			</div>
		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>
			// More info about config & dependencies:
			// - https://github.com/hakimel/reveal.js#configuration
			// - https://github.com/hakimel/reveal.js#dependencies
			Reveal.initialize({
//                width: 1920,
//                height: 1080,
//                minScale: 1,
//                maxScale: 1,
//				margin: 0.1,
				dependencies: [
					{ src: 'plugin/markdown/marked.js' },
					{ src: 'plugin/markdown/markdown.js' },
					{ src: 'plugin/notes/notes.js', async: true },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
				]
			});
		</script>
	</body>
</html>
